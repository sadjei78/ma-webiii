<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Import Contacts to Firebase</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; }
        .contact-item { margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; }
        .error { background-color: #f8d7da; }
        .preview-contact { background-color: #f8f9fa; padding: 10px; margin: 5px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Import Contacts to Firebase</h1>
        <p>This will import contacts from the VCF file to your Firebase database.</p>
        
        <div class="mb-3">
            <button class="btn btn-primary" onclick="importContacts()">Import All Contacts</button>
            <button class="btn btn-secondary" onclick="clearResults()">Clear Results</button>
            <button class="btn btn-info" onclick="previewContacts()">Preview Contacts</button>
        </div>
        
        <div id="results"></div>
        <div id="preview"></div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBPXNrOyLK63foHNgGaOpE8dS8N5ISl58s",
            authDomain: "mom-contacts-74dc5.firebaseapp.com",
            projectId: "mom-contacts-74dc5",
            storageBucket: "mom-contacts-74dc5.firebasestorage.app",
            messagingSenderId: "916136302641",
            appId: "1:916136302641:web:caf2ba534d4c76ee755d10",
            measurementId: "G-Q4HZSBT1Y1"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // All contacts from VCF file
        const vcfContacts = [
            { name: "Ogbedee Bi Awula Akua", phone: "020-093-0286" },
            { name: "DIANA SEBBIE", phone: "024-409-8159" },
            { name: "WHIRLPOOL EMMA", phone: "024-369-0007" },
            { name: "Srebor Whilp", phone: "024-490-3460" },
            { name: "Dr Nii Kwaku S", phone: "024-468-9907" },
            { name: "Mami joyce Adj", phone: "020-884-4359" },
            { name: "Sammy Charway", phone: "026-750-5378" },
            { name: "Stanchart Leg1", phone: "030-274-0100" },
            { name: "S A Osenda", phone: "+233277231977" },
            { name: "Legon S. C. B.", phone: "757-023-564" },
            { name: "Naa-ajeley Agu", phone: "020-071-4819" },
            { name: "Ann Konotey Ah", phone: "020-812-8693" },
            { name: "Anti Caro Hess", phone: "020-821-1511" },
            { name: "Stanchart Lego", phone: "028-955-5844" },
            { name: "OSCAR (PLUMBR)", phone: "020-767-8289" },
            { name: "Andie Aguda", phone: "024-460-2960" },
            { name: "Unknown Contact", phone: "020-819-2531" }
        ];

        function previewContacts() {
            const previewDiv = document.getElementById('preview');
            previewDiv.innerHTML = '<h3>Contact Preview:</h3>';
            
            vcfContacts.forEach((contact, index) => {
                const contactDiv = document.createElement('div');
                contactDiv.className = 'preview-contact';
                contactDiv.innerHTML = `
                    <strong>${index + 1}. ${contact.name}</strong><br>
                    <small>Phone: ${contact.phone}</small>
                `;
                previewDiv.appendChild(contactDiv);
            });
        }

        async function importContacts() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="alert alert-info">Importing contacts...</div>';
            
            let successCount = 0;
            let errorCount = 0;
            
            for (const contact of vcfContacts) {
                try {
                    await db.collection('contacts').add({
                        name: contact.name,
                        full_name: contact.name,
                        organization: '',
                        category: 'Uncategorized',
                        notes: 'Imported from VCF file',
                        important: false,
                        archived: false,
                        phone_numbers: [{
                            number: contact.phone.replace(/\D/g, ''),
                            display: contact.phone
                        }],
                        emails: [],
                        created_date: new Date().toISOString(),
                        last_modified: new Date().toISOString()
                    });
                    
                    successCount++;
                    addResult(`✅ Imported: ${contact.name}`, 'success');
                } catch (error) {
                    errorCount++;
                    addResult(`❌ Error importing ${contact.name}: ${error.message}`, 'error');
                }
            }
            
            addResult(`<strong>Import complete!</strong> Success: ${successCount}, Errors: ${errorCount}`, 'info');
        }

        function addResult(message, type) {
            const resultsDiv = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `alert alert-${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'}`;
            div.innerHTML = message;
            resultsDiv.appendChild(div);
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
            document.getElementById('preview').innerHTML = '';
        }
    </script>
</body>
</html> 